<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>גיאומטריים בפיזיקה - אופטיקה גיאומטרית</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            overflow-x: hidden;
            max-width: 100vw;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            direction: rtl;
            overflow-x: hidden;
            max-width: 100vw;
        }

        .container {
            max-width: 100%;
            margin: 0;
            padding: 0 10px;
            width: 100%;
        }

        /* Navigation */
        nav {
            background: #333;
            padding: 0.8rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            width: 100vw;
            margin: 0;
        }

        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
        }

        nav li {
            margin: 0 15px;
        }

        nav a {
            color: white;
            text-decoration: none;
            padding: 10px 16px;
            border-radius: 5px;
            transition: background 0.3s;
            font-size: 1.1em;
            font-weight: 500;
        }

        nav a:hover,
        nav a.active {
            background: #ff69b4;
        }

        /* Page content */
        .page {
            display: none;
            min-height: calc(100vh - 75px);
            padding: 0;
            width: 100%;
            max-width: 100vw;
            overflow-x: hidden;
        }

        .page.active {
            display: block;
        }

        /* Home page */
        .home-page {
            background: #FEEFF4;
            text-align: center;
            color: #333;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: calc(100vh - 75px);
            position: relative;
            width: 100vw;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        .home-title {
            font-size: 4em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            line-height: 1.2;
            color: #333;
        }

        .prism-container {
            margin: 40px 0;
        }

        .prism {
            width: 200px;
            height: 150px;
            background: linear-gradient(45deg, #87CEEB, #98FB98);
            clip-path: polygon(20% 0%, 80% 50%, 20% 100%);
            position: relative;
            margin: 0 auto;
            border-radius: 20px;
        }

        .light-ray {
            position: absolute;
            width: 100px;
            height: 3px;
            background: linear-gradient(90deg, white, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
            top: 50%;
            right: -50px;
            transform: translateY(-50%);
        }

        .superhero {
            position: absolute;
            bottom: 20px;
            left: 20px;
            width: 300px;
            height: 400px;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 400"><path d="M150 50 L180 80 L180 200 L220 250 L220 350 L200 370 L200 390 L160 390 L160 370 L140 370 L140 390 L100 390 L100 370 L80 350 L80 250 L120 200 L120 80 Z" fill="white" stroke="black" stroke-width="2"/><circle cx="150" cy="70" r="25" fill="white" stroke="black" stroke-width="2"/><text x="150" y="150" text-anchor="middle" font-size="30" fill="black">S</text></svg>') no-repeat center;
            background-size: contain;
        }

        .brand-logo {
            position: absolute;
            bottom: 40px;
            right: 40px;
            font-size: 2em;
            color: #ff69b4;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        /* Main SVG Container */
        .main-svg-container {
            width: 100vw;
            height: calc(100vh - 75px);
            margin: 0;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .main-svg-container img {
            width: 85vw;
            height: 80vh;
            max-width: none;
            max-height: none;
            object-fit: contain;
        }

        /* Welcome page */
        .welcome-page {
            background: #F9DDE3 !important;
            padding: 0;
            text-align: center;
            height: calc(100vh - 75px);
            position: relative;
            width: 100vw;
            margin: 0;
            overflow: hidden;
        }

        /* Page 2 SVG Container */
        .page2-svg-container {
            position: absolute;
            top: 150px;
            left: 300px;
            width: 400px;
            max-width: 400px;
            z-index: 1;
            pointer-events: none;
        }

        .page2-svg-container img {
            width: 100%;
            height: auto;
            object-fit: contain;
            transform: scale(2.4);
            display: block;
        }

        /* YouTube Video Container for Page 2 */
        .page2-video-container {
            position: absolute;
            top: 180px;
            left: 50%;
            transform: translateX(-50%);
            width: 75%;
            max-width: 800px;
            height: calc(100vh - 300px);
            z-index: 10;
        }

        .page2-video-container iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .welcome-title {
            font-size: 8em;
            color: white;
            font-weight: bold;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            margin-bottom: 40px;
        }

        .welcome-content {
            background: white;
            border: 3px solid #333;
            border-radius: 15px;
            padding: 40px;
            margin: 40px auto;
            max-width: 800px;
            font-size: 1.4em;
            line-height: 1.8;
            text-align: right;
        }

        .highlight-box {
            background: #ff69b4;
            color: white;
            padding: 20px;
            border-radius: 25px;
            margin: 30px 0;
            font-size: 1.2em;
            font-weight: bold;
        }

        /* Video page */
        .video-page {
            background: white;
            text-align: center;
            padding: 0;
            height: calc(100vh - 75px);
            position: relative;
            width: 100vw;
            margin: 0;
            overflow: hidden;
        }

        /* Page 3 Total SVG Container */
        .page3total-svg-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .page3total-svg-container img {
            width: 95%;
            height: 95%;
            object-fit: contain;
            display: block;
        }

        .video-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* What's here page */
        .whats-here-page {
            background: linear-gradient(135deg, #ffc0cb, #ffb6c1);
            padding: 60px 0;
            text-align: center;
        }

        .cards-container {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 60px;
            flex-wrap: wrap;
        }

        .topic-card {
            background: white;
            border: 3px solid #333;
            border-radius: 15px;
            padding: 40px 30px;
            width: 300px;
            position: relative;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .topic-card:hover {
            transform: translateY(-5px);
        }

        .topic-card.reflection {
            background: #ffc0cb;
        }

        .topic-card.refraction {
            background: #ffb6c1;
        }

        .topic-card.lenses {
            background: #daa520;
        }

        .card-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .card-arrow {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2em;
        }

        /* Physics pages */
        .physics-page {
            height: calc(100vh - 75px);
            padding: 0;
            text-align: center;
            position: relative;
            width: 100vw;
            margin: 0;
            overflow: hidden;
        }

        .physics-page.reflection {
            background: white;
        }

        .physics-page.refraction {
            background: white;
        }

        .physics-page.lenses {
            background: white;
        }

        /* Page Guide SVG Container - Default (for reflection page) */
        .page-guide-svg-container {
            position: absolute;
            top: 350px;
            left: auto;
            right: 150px;
            transform: none;
            width: 120px;
            height: 120px;
            z-index: 200;
            cursor: pointer;
            transition: transform 0.3s;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .page-guide-svg-container:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 18px rgba(0,0,0,0.25);
        }

        /* Page Guide SVG Container - Refraction and Lenses pages (moved to right) */
        .physics-page.refraction .page-guide-svg-container,
        .physics-page.lenses .page-guide-svg-container {
            left: auto;
            right: 80px;
            transform: none;
        }

        .physics-page.refraction .page-guide-svg-container:hover,
        .physics-page.lenses .page-guide-svg-container:hover {
            transform: scale(1.1);
        }

        .page-guide-svg-container img {
            width: 90px;
            height: 90px;
            object-fit: contain;
            display: block;
        }

        .physics-title {
            font-size: 8em;
            color: white;
            font-weight: bold;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            writing-mode: vertical-rl;
            position: absolute;
            right: 50px;
            top: 50%;
            transform: translateY(-50%);
        }

        .physics-title.lenses {
            color: #333;
        }

        .physics-icon {
            position: absolute;
            top: 50px;
            right: 50px;
            font-size: 5em;
        }

        .book-icon {
            position: absolute;
            bottom: 50px;
            left: 50px;
            width: 80px;
            height: 80px;
            background: #ff69b4;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2em;
            cursor: pointer;
            transition: transform 0.3s;
            border: 3px solid #333;
        }

        .book-icon:hover {
            transform: scale(1.1);
        }

        .app-frame {
            position: absolute;
            top: 60px;
            left: 5%;
            right: 5%;
            bottom: 40px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            background: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        /* Page 4 Banner SVG Container */
        .physics-page.reflection .page4-banner-svg-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 600px;
            height: 100%;
            z-index: 1;
        }

        .physics-page.reflection .page4-banner-svg-container img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
        }

        /* Page 5 Banner SVG Container */
        .physics-page.refraction .page5-banner-svg-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 600px;
            height: 100%;
            z-index: 1;
        }

        .physics-page.refraction .page5-banner-svg-container img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
        }

        /* Page 6 Banner SVG Container */
        .physics-page.lenses .page6-banner-svg-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 600px;
            height: 100%;
            z-index: 1;
        }

        .physics-page.lenses .page6-banner-svg-container img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
        }

        .app-frame iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 13px;
        }

        /* Guide Modal */
        .guide-modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.3);
        }

        .guide-modal-content {
            position: absolute;
            background-color: white;
            top: 10%;
            right: 5%;
            padding: 0;
            border-radius: 15px;
            width: 45%;
            height: 80%;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            overflow: hidden;
            resize: both;
            min-width: 300px;
            min-height: 400px;
            max-width: 90%;
            max-height: 90%;
        }

        .guide-modal-header {
            background: linear-gradient(135deg, #7c4756 0%, #b8860b 100%);
            color: white;
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
        }

        .guide-modal-title {
            font-size: 1.2em;
            font-weight: bold;
            margin: 0;
            flex-grow: 1;
        }

        .guide-controls {
            display: flex;
            gap: 5px;
        }

        .guide-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.2em;
            cursor: pointer;
            padding: 5px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }

        .guide-btn:hover {
            background-color: rgba(255,255,255,0.2);
        }

        .guide-minimize {
            font-size: 1.5em;
        }

        .guide-close {
            font-size: 1.8em;
        }

        .guide-iframe-container {
            width: 100%;
            height: calc(100% - 70px);
            position: relative;
        }

        .guide-iframe-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-svg-container img {
                width: 95vw;
                height: 85vh;
            }
            
            .app-frame {
                top: 80px;
                left: 1%;
                right: 1%;
                bottom: 5px;
            }
            
            .guide-modal-content {
                width: 90% !important;
                height: 70% !important;
                top: 15% !important;
                right: 5% !important;
                left: 5% !important;
            }
            
            .page-guide-svg-container {
                width: 80px;
                height: 80px;
                top: 70px;
            }
            
            .physics-page.refraction .page-guide-svg-container,
            .physics-page.lenses .page-guide-svg-container {
                right: 20px;
                left: auto;
                transform: none;
            }
            
            .page-guide-svg-container img {
                width: 60px;
                height: 60px;
            }
            
            .app-frame {
                top: 50px;
                left: 1%;
                right: 1%;
                bottom: 5px;
            }
            
            .guide-modal-content {
                width: 98%;
                height: 98%;
                margin: 1% auto;
            }
            
            nav a {
                padding: 6px 8px;
                font-size: 0.8em;
            }
            
            /* Page 3 responsive fixes */
            .page3total-svg-container img {
                width: 98%;
                height: 98%;
            }
        }
        


        @media (max-width: 480px) {
            /* Even smaller screens */
            .page3total-svg-container img {
                width: 99%;
                height: 99%;
            }
        }
    </style>
</head>
<body>
    <nav>
        <div class="container">
            <ul>
                <li><a href="#" onclick="showPage('home')" class="nav-link active">דף הבית</a></li>
                <li><a href="#" onclick="showPage('welcome')" class="nav-link">ברוכים הבאים</a></li>
                <li><a href="#" onclick="showPage('video')" class="nav-link">מה עושים פה</a></li>
                <li><a href="#" onclick="showPage('reflection')" class="nav-link">חוק ההחזרה</a></li>
                <li><a href="#" onclick="showPage('refraction')" class="nav-link">חוק השבירה</a></li>
                <li><a href="#" onclick="showPage('lenses')" class="nav-link">עדשות</a></li>
            </ul>
        </div>
    </nav>

    <!-- Home Page -->
    <div id="home" class="page active">
        <div class="home-page">
            <!-- Main SVG Image -->
            <div class="main-svg-container">
                <img src="homepage.svg" alt="תרשים אופטיקה גיאומטרית" />
            </div>
        </div>
    </div>

    <!-- Welcome Page -->
    <div id="welcome" class="page">
        <div class="welcome-page">
            <!-- Page 2 SVG Image -->
            <div class="page2-svg-container">
                <img src="page2.svg" alt="תרשים עמוד 2" />
            </div>
            
            <!-- YouTube Video Container -->
            <div class="page2-video-container">
                <iframe src="https://www.youtube.com/embed/e8LAHLB0P2Y" 
                        title="סרטון הסבר" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                </iframe>
            </div>
        </div>
    </div>

    <!-- Video Page -->
    <div id="video" class="page">
        <div class="video-page">
            <!-- Page 3 Total SVG Image -->
            <div class="page3total-svg-container">
                <img src="page3total.svg" alt="תרשים כולל עמוד 3" />
            </div>
        </div>
    </div>

    <!-- Reflection Page -->
    <div id="reflection" class="page">
        <div class="physics-page reflection">
            <!-- Page 4 Banner SVG on left side -->
            <div class="page4-banner-svg-container">
                <img src="page4banner.svg" alt="באנר עמוד 4" />
            </div>
            
            <!-- Page Guide SVG in top right corner -->
            <div class="page-guide-svg-container" onclick="openGuide('reflection')" title="מדריך לעבודה עם האפליקציה">
                <img src="page4guide.svg" alt="מדריך עמוד 4" />
            </div>
            
            <!-- Embedded App Frame -->
            <div class="app-frame">
                <iframe src="https://irispelled.github.io/Geometricoptics/" 
                        title="אפליקציית חוק ההחזרה"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        loading="lazy">
                </iframe>
            </div>
        </div>
    </div>

    <!-- Refraction Page -->
    <div id="refraction" class="page">
        <div class="physics-page refraction">
            <!-- Page 5 Banner SVG on left side -->
            <div class="page5-banner-svg-container">
                <img src="page5banner.svg" alt="באנר עמוד 5" />
            </div>
            

            
            <!-- Embedded App Frame -->
            <div class="app-frame">
                <iframe src="https://irispelled.github.io/geometricsnell/" 
                        title="אפליקציית חוק השבירה"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        loading="lazy">
                </iframe>
            </div>
        </div>
    </div>

    <!-- Lenses Page -->
    <div id="lenses" class="page">
        <div class="physics-page lenses">
            <!-- Page 6 Banner SVG on left side -->
            <div class="page6-banner-svg-container">
                <img src="page6banner.svg" alt="באנר עמוד 6" />
            </div>
            

            
            <!-- Embedded App Frame -->
            <div class="app-frame">
                <iframe src="https://irispelled.github.io/lens/" 
                        title="אפליקציית עדשות"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        loading="lazy">
                </iframe>
            </div>
        </div>
    </div>

    <!-- Guide Modal -->
    <div id="guideModal" class="guide-modal">
        <div id="guideModalContent" class="guide-modal-content">
            <div class="guide-modal-header" id="guideHeader">
                <h2 class="guide-modal-title">מדריך לעבודה עם האפליקציה</h2>
                <div class="guide-controls">
                    <button class="guide-btn guide-minimize" onclick="toggleMinimize()" title="הקטן/הגדל">−</button>
                    <button class="guide-btn guide-close" onclick="closeGuide()" title="סגור">&times;</button>
                </div>
            </div>
            <div class="guide-iframe-container" id="guideContent">
                <iframe id="guideIframe" src="" title="מדריך האפליקציה"></iframe>
            </div>
        </div>
    </div>

    <script>
        function showPage(pageId) {
            // Hide all pages
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update navigation
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => link.classList.remove('active'));
            event.target.classList.add('active');
        }

        let isMinimized = false;
        let isDragging = false;
        let dragOffset = { x: 0, y: 0 };

        // Function to open guide modal
        function openGuide(topic) {
            const guides = {
                'reflection': 'https://drive.google.com/file/d/1bjjyqmwDS00FcA2vv4uCmY3dfJs8n-uc/preview',
                'refraction': 'https://drive.google.com/file/d/1wZSjXYruu1zT-VRCNZbDtPpwWtDVuFKp/preview',
                'lenses': 'https://drive.google.com/file/d/1IBb9PN4r342iZa68muveh01yeyiRIw_i/preview'
            };
            
            const modal = document.getElementById('guideModal');
            const iframe = document.getElementById('guideIframe');
            
            if (guides[topic]) {
                iframe.src = guides[topic];
                modal.style.display = 'block';
                // Don't prevent background scrolling to allow working with the app
            }
        }

        // Function to close guide modal
        function closeGuide() {
            const modal = document.getElementById('guideModal');
            const iframe = document.getElementById('guideIframe');
            
            modal.style.display = 'none';
            iframe.src = ''; // Clear iframe to stop loading
            isMinimized = false;
        }

        // Function to toggle minimize/maximize
        function toggleMinimize() {
            const content = document.getElementById('guideModalContent');
            const guideContent = document.getElementById('guideContent');
            const minimizeBtn = document.querySelector('.guide-minimize');
            
            if (!isMinimized) {
                // Minimize
                content.style.height = '40px';
                content.style.width = '300px';
                guideContent.style.display = 'none';
                minimizeBtn.innerHTML = '+';
                minimizeBtn.title = 'הגדל';
                isMinimized = true;
            } else {
                // Maximize
                content.style.height = '80%';
                content.style.width = '45%';
                guideContent.style.display = 'block';
                minimizeBtn.innerHTML = '−';
                minimizeBtn.title = 'הקטן';
                isMinimized = false;
            }
        }

        // Make modal draggable
        document.addEventListener('DOMContentLoaded', function() {
            const header = document.getElementById('guideHeader');
            const modal = document.getElementById('guideModalContent');
            
            header.addEventListener('mousedown', function(e) {
                isDragging = true;
                const rect = modal.getBoundingClientRect();
                dragOffset.x = e.clientX - rect.left;
                dragOffset.y = e.clientY - rect.top;
                document.addEventListener('mousemove', drag);
                document.addEventListener('mouseup', stopDrag);
            });
            
            function drag(e) {
                if (!isDragging) return;
                const x = e.clientX - dragOffset.x;
                const y = e.clientY - dragOffset.y;
                
                // Keep modal within viewport
                const maxX = window.innerWidth - modal.offsetWidth;
                const maxY = window.innerHeight - modal.offsetHeight;
                
                modal.style.left = Math.max(0, Math.min(x, maxX)) + 'px';
                modal.style.top = Math.max(0, Math.min(y, maxY)) + 'px';
                modal.style.right = 'auto'; // Remove right positioning when dragging
            }
            
            function stopDrag() {
                isDragging = false;
                document.removeEventListener('mousemove', drag);
                document.removeEventListener('mouseup', stopDrag);
            }
        });

        // Close modal when clicking outside of it (but not on the modal content)
        window.onclick = function(event) {
            const modal = document.getElementById('guideModal');
            const modalContent = document.getElementById('guideModalContent');
            if (event.target === modal && !modalContent.contains(event.target)) {
                closeGuide();
            }
        }

        // Close modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeGuide();
            }
        });
    </script>
</body>
</html>
